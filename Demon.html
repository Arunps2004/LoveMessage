<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Add Item Demo</title>
  <style>
    :root { --bg:#0f172a; --card:#111827; --muted:#9ca3af; --text:#e5e7eb; --accent:#22c55e; --danger:#ef4444; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; background: linear-gradient(135deg,#0b1022,#111827 35%,#0b1022); color: var(--text); min-height: 100vh; display: grid; place-items: center; padding: 24px; }
    .wrap { width: 100%; max-width: 700px; background: rgba(17,24,39,.7); backdrop-filter: blur(6px); border: 1px solid #1f2937; border-radius: 18px; box-shadow: 0 10px 30px rgba(0,0,0,.35); overflow: hidden; }
    header { padding: 18px 20px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #1f2937; }
    header h1 { margin: 0; font-size: 18px; letter-spacing: .3px; }
    .counter { font-size: 13px; color: var(--muted); }

    .controls { display: grid; grid-template-columns: 1fr auto; gap: 10px; padding: 16px; background: #0b1224; border-bottom: 1px solid #1f2937; }
    .controls input { width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid #253047; background: #0e1429; color: var(--text); outline: none; }
    .controls input::placeholder { color: #6b7280; }
    .controls button { padding: 12px 16px; border: 0; border-radius: 12px; background: var(--accent); color: #08151a; font-weight: 700; cursor: pointer; }
    .controls button:disabled { opacity: .6; cursor: not-allowed; }

    ul { list-style: none; margin: 0; padding: 0; }
    li { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; padding: 14px 16px; border-bottom: 1px solid #1f2937; }
    li:last-child { border-bottom: 0; }

    .item-text { display: flex; align-items: center; gap: 10px; }
    .item-text input[type="checkbox"] { width: 18px; height: 18px; }
    .label { flex: 1; word-break: break-word; }
    .label.done { text-decoration: line-through; color: var(--muted); }

    .actions { display: flex; gap: 6px; }
    .btn { border: 1px solid #334155; background: #0e1429; color: var(--text); padding: 8px 10px; border-radius: 10px; cursor: pointer; font-size: 12px; }
    .btn:hover { border-color: #475569; }
    .btn.danger { border-color: #7f1d1d; color: #fecaca; background: #3f1818; }
    .empty { padding: 18px 16px; color: var(--muted); text-align: center; }

    footer { padding: 14px 16px; display: flex; gap: 10px; justify-content: space-between; align-items: center; border-top: 1px solid #1f2937; background: #0b1224; }
    .filters { display: flex; gap: 8px; }
    .chip { padding: 6px 10px; border-radius: 999px; font-size: 12px; border: 1px solid #334155; background: #0e1429; color: var(--text); cursor: pointer; }
    .chip.active { border-color: var(--accent); color: #052e1b; background: #22c55e; }
    .clear { font-size: 12px; color: #fca5a5; background: transparent; border: 0; cursor: pointer; }
    @media (max-width: 520px){
      .controls { grid-template-columns: 1fr; }
      .actions { gap: 4px; }
    }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Add item list">
    <header>
      <h1>My Items</h1>
      <div class="counter" id="counter">0 items</div>
    </header>

    <div class="controls">
      <input id="itemInput" type="text" placeholder="Type an item and press Enter" aria-label="New item" />
      <button id="addBtn" aria-label="Add item" disabled>Add</button>
    </div>

    <ul id="list" aria-live="polite"></ul>
    <div id="empty" class="empty">No items yet. Add your first one.</div>

    <footer>
      <div class="filters" role="tablist" aria-label="Filters">
        <button class="chip active" data-filter="all" aria-selected="true">All</button>
        <button class="chip" data-filter="open" aria-selected="false">Open</button>

<button class="chip" data-filter="done" aria-selected="false">Done</button>
      </div>
      <button id="clearDone" class="clear">Clear completed</button>
    </footer>
  </div>

  <template id="itemTemplate">
    <li>
      <div class="item-text">
        <input type="checkbox" class="toggle" aria-label="Mark done" />
        <span class="label"></span>
      </div>
      <div class="actions">
        <button class="btn edit" aria-label="Edit">Edit</button>
        <button class="btn danger delete" aria-label="Delete">Delete</button>
      </div>
    </li>
  </template>

  <script>
    const STORAGE_KEY = "add-item-demo:v1";
    const itemInput = document.getElementById('itemInput');
    const addBtn = document.getElementById('addBtn');
    const list = document.getElementById('list');
    const empty = document.getElementById('empty');
    const counter = document.getElementById('counter');
    const clearDone = document.getElementById('clearDone');

    let items = load();
    let filter = 'all';

    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(items)); }
    function load(){ try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; } catch { return []; } }

    function uid(){ return Math.random().toString(36).slice(2) + Date.now().toString(36); }

    function setCounter(){
      const count = items.length;
      counter.textContent = ${count} ${count === 1 ? 'item' : 'items'};
    }

    function render(){
      list.innerHTML = '';
      const filtered = items.filter(i => filter === 'all' || (filter === 'done' ? i.done : !i.done));
      filtered.forEach(item => list.appendChild(renderItem(item)));
      empty.style.display = filtered.length ? 'none' : 'block';
      setCounter();
    }

    function renderItem(item){
      const tpl = document.getElementById('itemTemplate');
      const node = tpl.content.firstElementChild.cloneNode(true);
      const checkbox = node.querySelector('.toggle');
      const label = node.querySelector('.label');
      const editBtn = node.querySelector('.edit');
      const delBtn = node.querySelector('.delete');

      label.textContent = item.text;
      label.classList.toggle('done', item.done);
      checkbox.checked = item.done;

      checkbox.addEventListener('change', () => {
        item.done = checkbox.checked;
        label.classList.toggle('done', item.done);
        save();
        render();
      });

      editBtn.addEventListener('click', () => startEdit(node, item));
      delBtn.addEventListener('click', () => removeItem(item.id));
      return node;
    }

    function startEdit(node, item){
      const label = node.querySelector('.label');
      const input = document.createElement('input');
      input.type = 'text';
      input.value = item.text;
      input.className = 'label';
      input.style.background = '#0e1429';
      input.style.color = 'var(--text)';
      input.style.border = '1px solid #253047';
      input.style.borderRadius = '8px';
      input.style.padding = '6px 8px';
      label.replaceWith(input);
      input.focus();

      function commit(){
        item.text = input.value.trim() || item.text;
        save();
        render();
      }

      input.addEventListener('keydown', (e) => {
        if(e.key === 'Enter') commit();
        if(e.key === 'Escape') render();
      });
      input.addEventListener('blur', commit);
    }

    function removeItem(id){
      items = items.filter(i => i.id !== id);
      save();
      render();
    }

    function addItem(text){
      const trimmed = text.trim();
      if(!trimmed) return;
      items.unshift({ id: uid(), text: trimmed, done: false });
      save();
      render();
    }

    addBtn.addEventListener('click', () => { addItem(itemInput.value); itemInput.value=''; addBtn.disabled = true; itemInput.focus(); });
    itemInput.addEventListener('input', () => { addBtn.disabled = !itemInput.value.trim(); });
    itemInput.addEventListener('keydown', (e) => { if(e.key === 'Enter' && itemInput.value.trim()){ addBtn.click(); }});

    document.querySelectorAll('.

chip').forEach(ch => ch.addEventListener('click', () => {
      document.querySelectorAll('.chip').forEach(c => { c.classList.remove('active'); c.setAttribute('aria-selected','false'); });
      ch.classList.add('active'); ch.setAttribute('aria-selected','true');
      filter = ch.dataset.filter; render();
    }));

    clearDone.addEventListener('click', () => {
      items = items.filter(i => !i.done);
      save();
      render();
    });

    render();
  </script>
</body>
</html>
